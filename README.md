# Система управления для контроллера rgb ленты
## Схема подключения

### Основные компоненты:
1. Arduino Mega
2. Адресная светодиодная лента (NeoPixel, 60 LED)
3. Датчик DHT11 (температура/влажность)
4. Датчик MQ-135 (CO₂)
5. Датчик температуры LM335
6. LCD дисплей 20x4 (I²C, адрес 0x27)
7. Кнопка
8. NPN транзисторы (2 шт, например BC547)
9. Резисторы: 1 кОм (4 шт)
10. Внешний источник питания 5V (рекомендуется для LED-ленты)

---

### Подключение компонентов:

**1. Светодиодная лента (NeoPixel):**
- DIN → Pin 7 (Arduino)
- VCC → Внешний источник 5V
- GND → Общий GND

**2. Кнопка:**
- Один вывод → Pin 6 (Arduino)
- Другой вывод → GND

**3. Датчик DHT11:**
- VCC → Коллектор транзистора Q2
- DATA → Pin 5 (Arduino)
- GND → GND

**4. LCD дисплей (I²C):**
- VCC → 5V (Arduino)
- GND → Коллектор транзистора Q1
- SDA → Pin 20 (Arduino)
- SCL → Pin 21 (Arduino)

**5. Датчик MQ-135:**
- VCC → 5V (Arduino)
- GND → GND
- OUT → Pin A0 (Arduino)

**6. Датчик LM335:**
- V+ → 5V (Arduino)
- Vout → Pin A1 (Arduino) + Резистор 1 кОм → GND
- GND → GND

**7. Транзистор Q1 (управление LCD):**
- База → Резистор 1 кОм → Pin 3 (Arduino)
- Коллектор → GND LCD
- Эмиттер → GND

**8. Транзистор Q2 (управление DHT11):**
- База → Резистор 1 кОм → Pin 4 (Arduino)
- Коллектор → VCC DHT11
- Эмиттер → 5V (Arduino)

---

### Сводная таблица подключений:

| Компонент       | Пин Arduino | Подключение                     | Дополнительные компоненты     |
|-----------------|-------------|---------------------------------|-------------------------------|
| NeoPixel DIN    | 7           | Data In ленты                   | -                             |
| Кнопка          | 6           | Один вывод кнопки               | Другой вывод → GND            |
| DHT11 DATA      | 5           | Сигнальный провод датчика       | -                             |
| DHT11 VCC       | -           | Через Q2                        | Управление: Pin 4 → Q2 Base   |
| LCD SDA         | 20          | I²C Data                        | -                             |
| LCD SCL         | 21          | I²C Clock                       | -                             |
| LCD GND         | -           | Через Q1                        | Управление: Pin 3 → Q1 Base   |
| MQ-135 OUT      | A0          | Аналоговый выход датчика        | -                             |
| LM335 Vout      | A1          | Аналоговый выход датчика        | Резистор 1 кОм → GND          |
| Q1 Base         | 3           | Через резистор 1 кОм            | Коллектор → LCD GND           |
| Q2 Base         | 4           | Через резистор 1 кОм            | Коллектор → DHT11 VCC         |

---

### Пояснения:
1. **Управление питанием:**
   - LCD включается/выключается через транзистор Q1, который замыкает GND дисплея на общую землю
   - DHT11 включается/выключается через транзистор Q2, который подает +5V на датчик

2. **Датчики:**
   - MQ-135 подключен напрямую к аналоговому входу A0
   - LM335 использует простую схему с резистором 1 кОм для измерения напряжения
   - DHT11 подключен к цифровому пину 5 с управлением питанием

3. **Кнопка:**
   - Использует внутренний подтягивающий резистор Arduino
   - При нажатии замыкает Pin 6 на GND

4. **NeoPixel лента:**
   - Требует внешнего питания для 60 светодиодов
   - Управляется через единственный сигнальный провод (DIN)

5. **Транзисторы:**
   - Используйте NPN транзисторы общего назначения (BC547, 2N2222 и т.п.)
   - Резисторы 1 кОм защищают выводы Arduino

---

### Важные замечания:
1. Для LED-ленты обязательно используйте внешний источник питания 5V
2. При подключении питания соблюдайте полярность
3. Заземлите все компоненты на общую землю
4. Для точных измерений MQ-135 требуется калибровка (изменение R0 в скетче)
5. LM335 должен быть подключен по схеме: 5V → Датчик → Резистор 1 кОм → GND, с отводом сигнала с соединения датчик-резистор на A1



## Программная часть
1. вначале залить **erase.ino** для очистки EEPROM от мусора и установки значений по умолчанию (открыть последовательный порт на скорости 9600 и ввести Y)
2. записать **sketch.ino** 
3. открыть последовательный порт на скорости 9600 и введите **help**

###### Планируется добавление интерфейса на flask для более удобного управления