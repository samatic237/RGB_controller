# Система управления для контроллера rgb ленты
## Схема подключения

### Основные компоненты:
1. Arduino Mega
2. Адресная светодиодная лента (NeoPixel, 60 LED)
3. Датчик DHT11 (температура/влажность)
4. Датчик MQ-135 (CO₂)
5. Датчик температуры LM335
6. LCD дисплей 20x4 (I²C, адрес 0x27)
7. Кнопка
8. NPN транзисторы (2 шт, например BC547) - для управления питанием
9. Резисторы: 1 кОм (4 шт), 4.7 кОм (1 шт)
10. Внешний источник питания 5V (для LED-ленты)

+----------------------------------------------------------------+
|                          Arduino Mega                          |
+----------------------------------------------------------------+
| Пин | Назначение               | Подключение                   |
|-----|--------------------------|-------------------------------|
| 3   | LCD Power Control        | База Q1 (через R1 1кОм)       |
| 4   | DHT11 Power Control      | База Q2 (через R2 1кОм)       |
| 5   | DHT11 Data               | DATA (DHT11)                  |
| 6   | Кнопка                   | → Кнопка → GND                |
| 7   | NeoPixel Data            | DIN (LED-лента)               |
| A0  | MQ-135 Analog            | OUT (MQ-135)                  |
| A1  | LM335 Analog             | LM335 Output                  |
| 20  | I²C SDA                  | SDA (LCD)                     |
| 21  | I²C SCL                  | SCL (LCD)                     |
| 5V  | Питание                  | Все VCC компонентов           |
| GND | Земля                    | Все GND компонентов           |
+----------------------------------------------------------------+

+--------------------+      +---------------------------------------+
|    DHT11           |      |              LM335                    |
+--------------------+      +---------------------------------------+
| VCC  → Коллектор Q2|      | V+  → 5V                              |
| DATA → D5          |      | Vout → A1 → R3 (1кОм) → GND           |
| GND  → GND         |      | GND  → GND                            |
+--------------------+      +---------------------------------------+

+-----------------+      +---------------------------------------+
|    MQ-135       |      |               LCD I²C                 |
+-----------------+      +---------------------------------------+
| VCC  → 5V       |      | VCC  → 5V                             |
| GND  → GND      |      | GND  → Эмиттер Q1                     |
| OUT  → A0       |      | SDA  → 20 (SDA)                       |
+-----------------+      | SCL  → 21 (SCL)                       |
                         +---------------------------------------+

+-----------------+      +---------------------------------------+
|   NeoPixel      |      |          Кнопка                       |
+-----------------+      +---------------------------------------+
| VCC  → Внеш. 5V |      | Один конец → D6                       |
| DIN  → D7       |      | Другой конец → GND                    |
| GND  → Общий GND|      +---------------------------------------+
+-----------------+
+----------------------------------------------------------------+
|    Транзисторы (NPN)                                           |
+----------------------------------------------------------------+
| Q1 (LCD Control):                                              |
|   База     → R1 (1кОм) → D3                                    |
|   Коллектор→ LCD GND                                           |
|   Эмиттер  → GND                                               |
|                                                                |
| Q2 (DHT11 Control):                                            |
|   База     → R2 (1кОм) → D4                                    |
|   Коллектор→ DHT11 VCC                                         |
|   Эмиттер  → 5V                                                |
+----------------------------------------------------------------+

+----------------------------------------------------------------+
|    Делитель напряжения для LM335:                              |
|    A1 → R3 (1кОм) → R4 (1кОм) → GND                            |
|    (Средняя точка: A1 - R3 - R4)                               |
+----------------------------------------------------------------+

### Пояснения:
1. **Управление питанием**:
   - LCD: Пин D3 → R1 (1кОм) → База Q1. Коллектор Q1 к GND LCD, эмиттер к GND.
   - DHT11: Пин D4 → R2 (1кОм) → База Q2. Коллектор Q2 к VCC DHT11, эмиттер к 5V.

2. **Датчики**:
   - MQ-135: VCC→5V, GND→GND, OUT→A0.
   - LM335: Подключен через делитель напряжения (два резистора по 1кОм) к A1.
   - DHT11: DATA→D5, питание через Q2.

3. **Кнопка**:
   - Подключена между D6 и GND с использованием внутреннего подтягивающего резистора.

4. **NeoPixel**:
   - Питание от внешнего источника 5V (рекомендуется для 60 LED).
   - DIN→D7, GND→общий с Arduino.

5. **LCD дисплей**:
   - I²C подключение: SDA→20, SCL→21.
   - Питание GND управляется через транзистор Q1.
---
### Важные замечания:
1. Для LED-ленты обязательно используйте внешний источник питания 5V с достаточной мощностью.
2. Транзисторы Q1 и Q2:
   - Q1: Управляет GND LCD (открывается при HIGH на D3)
   - Q2: Управляет VCC DHT11 (открывается при HIGH на D4)
3. Делитель напряжения для LM335:
   - Используйте два резистора по 1 кОм между 5V и GND.
   - Средняя точка подключена к A1 и выходу LM335.
4. Для MQ-135:
   - Добавьте нагрузочный резистор 1 кОм между OUT и GND.
   - Калибровка датчика обязательна (значение R0 в скетче).

## Программная часть
1. вначале залить **erase.ino** для очистки EEPROM от мусора и установки значений по умолчанию (открыть последовательный порт на скорости 9600 и ввести Y)
2. записать **scetch.ino** 
3. открыть последовательный порт на скорости 9600 и введите **help**

###### Планируется добавление интерфейса на flask для более удобного управления